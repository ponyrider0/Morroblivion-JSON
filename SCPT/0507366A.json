{
    "Record Header": {
        "Signature": "SCPT", 
        "Data Size": 7785, 
        "Record Flags": {}, 
        "FormID": "0507366A", 
        "Version Control Info": "00 00 00 00"
    }, 
    "EDID - Editor ID": "fbmwbmHircineRingTransformationScript", 
    "SCHR - Basic Script Data": {
        "Unused": "00 00 00 00", 
        "RefCount": 19, 
        "CompiledSize": 1902, 
        "VariableCount": 20, 
        "Type": "Quest:1"
    }, 
    "SCDA - Compiled Script": "1D 00 00 00 10 00 06 00 00 00 70 06 00 00 15 00 09 00 66 10 00 04 00 20 30 2E 31 16 00 0A 00 1C 00 06 00 20 58 E7 14 00 00 15 00 1A 00 66 11 00 15 00 20 58 55 19 0F 00 01 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 15 00 1E 00 73 12 00 19 00 20 58 55 19 13 00 01 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 16 00 0D 00 09 00 09 00 20 66 11 00 20 30 20 21 3D 16 00 0F 00 07 00 0B 00 20 66 11 00 20 66 04 00 20 21 3D 06 14 16 00 01 00 12 00 52 6F 6C 6C 62 61 63 6B 20 53 61 76 65 20 47 61 6D 65 16 00 0F 00 02 00 0B 00 20 66 11 00 20 5A 06 00 20 3D 3D 69 14 24 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 47 07 00 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 00 04 00 42 01 19 00 00 00 83 18 17 00 01 05 00 52 09 00 02 08 00 56 04 00 00 11 00 08 00 56 02 00 00 12 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 11 00 19 00 00 00 19 00 00 00 16 00 19 00 0D 00 15 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 30 20 21 3D 20 26 26 54 19 1B 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 08 00 56 02 00 00 06 00 54 19 17 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0B 00 01 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 16 00 0F 00 04 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 15 00 14 00 73 08 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0C 00 20 2A 8D 14 08 00 02 00 73 08 00 72 0D 00 69 14 2A 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 7A 00 00 00 00 80 87 C3 40 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 01 04 00 42 01 17 00 02 00 02 00 15 00 14 00 73 0B 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0E 00 20 2A 8D 14 08 00 02 00 73 0B 00 72 0F 00 19 00 00 00 19 00 00 00 19 00 00 00 16 00 19 00 16 00 15 00 20 73 01 00 20 31 20 3D 3D 20 73 05 00 20 30 20 3D 3D 20 26 26 15 00 09 00 66 02 00 04 00 20 47 10 00 16 00 0D 00 01 00 09 00 20 73 06 00 20 30 20 21 3D FE 16 09 00 01 08 00 56 02 00 00 06 00 19 00 00 00 65 17 13 00 01 12 00 56 02 00 00 06 00 58 01 00 1D 17 04 00 00 00 00 54 19 1B 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 08 00 56 02 00 00 06 00 54 19 17 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0B 00 01 08 00 56 04 00 00 04 00 1C 00 01 00 69 16 05 00 01 00 72 11 00 83 18 0F 00 01 05 00 52 12 00 01 08 00 56 04 00 00 04 00 15 00 07 00 73 05 00 02 00 20 31 16 00 0F 00 05 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 15 00 2C 00 47 07 00 27 00 20 58 00 11 21 00 01 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 69 14 2A 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 7A 00 00 00 00 80 87 C3 40 15 00 14 00 73 08 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0C 00 20 2A 8D 14 08 00 02 00 73 08 00 72 0D 00 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 01 04 00 42 01 17 00 02 00 02 00 15 00 14 00 73 0B 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0E 00 20 2A 8D 14 08 00 02 00 73 0B 00 72 0F 00 19 00 00 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 18 00 0D 00 0C 00 09 00 20 73 01 00 20 31 20 3D 3D 16 00 0D 00 04 00 09 00 20 66 02 00 20 31 38 20 3C 16 00 13 00 02 00 0F 00 20 66 03 00 20 66 02 00 20 36 20 2B 20 3E 3D 15 00 07 00 73 01 00 02 00 20 32 72 17 16 00 01 15 00 53 10 00 70 72 65 70 61 72 65 20 72 6F 6C 6C 62 61 63 6B 19 00 00 00 18 00 0E 00 04 00 0A 00 20 66 03 00 20 66 02 00 20 3C 16 00 18 00 02 00 14 00 20 66 03 00 20 66 02 00 20 36 20 2B 20 32 34 20 2D 20 3E 3D 15 00 07 00 73 01 00 02 00 20 32 72 17 16 00 01 15 00 53 10 00 70 72 65 70 61 72 65 20 72 6F 6C 6C 62 61 63 6B 19 00 00 00 19 00 00 00 15 00 09 00 66 03 00 04 00 20 47 10 00 18 00 0D 00 0E 00 09 00 20 73 01 00 20 32 20 3D 3D 83 18 17 00 01 05 00 52 09 00 02 08 00 56 04 00 00 04 00 08 00 56 02 00 00 06 00 83 18 0F 00 01 05 00 52 13 00 01 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 16 00 0F 00 01 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 00 04 00 42 01 19 00 00 00 15 00 07 00 73 05 00 02 00 20 30 15 00 07 00 66 02 00 02 00 20 30 15 00 07 00 66 03 00 02 00 20 30 15 00 07 00 73 01 00 02 00 20 30 15 00 07 00 66 04 00 02 00 20 30 54 19 13 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 04 00 42 00 54 19 17 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 04 00 42 00 FE 16 09 00 01 08 00 56 02 00 00 06 00 19 00 00 00 16 00 0F 00 0A 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 16 00 0D 00 08 00 09 00 20 73 05 00 20 31 20 3D 3D 65 17 13 00 01 12 00 56 04 00 00 0E 00 58 00 00 27 16 04 00 00 00 00 16 00 08 00 05 00 04 00 20 66 0E 00 16 00 25 00 01 00 21 00 20 72 04 00 58 5E 14 02 00 00 00 20 31 20 3D 3D 20 72 04 00 58 05 10 00 00 20 30 20 3D 3D 20 26 26 A8 15 07 00 01 00 6E 05 00 00 00 17 00 02 00 01 00 A7 15 07 00 01 00 6E 05 00 00 00 19 00 00 00 19 00 00 00 19 00 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E EA 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E EB 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E FE 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E FF 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00", 
    "SCTX - Script Source": "scn fbmwbmHircineRingTransformationScript\nfloat fQuestDelayTime\nshort Transform\nfloat time\nfloat newtime\nref Actor\nshort iswerewolf\nstring_var modelpath\nshort GetPathOnce\nshort attackclaws\nArray_var equippeditem\nshort i\nshort attackclawsNPC\nref item\nref potentialattacker\nref crosshairRef\nref lastActor\nstring_var lastModelPath\nshort numb\n;;LOcal Data LastActor, LastModelPath\nBegin GameMode\n	set fQuestDelayTime to 0.1\n	;Hircine ring transformation differs slightly form original one\n	;We really need to have some ModLocalData to manage reloading\n	;No wait control disabilitation, no bloodlust\n	;TODO still need to readd ponyrider0 additions\n	;;Note this script expect that only one instance of hircine's ring exist on the gameworld\n	;;Otherwise I would need a way to store as LocalData an array and this is not possible AFAIK\n	;;TODO Try to allow an array local data\n;	set numb to player.GetObjectReferenceCount fbmwBMringhircine\n;	printc \"Number  %.0f\" numb\n;	if( numb > 1)\n;		printc \"too much Hircine's Ring Spawned %.0f . disable quest script\" numb\n;	endif\n	if (GetGameLoaded)\n		set lastActor to GetModLocalData \"LastActor\"		\n		set lastModelPath to GetModLocalData \"LastModelPath\"\n		;printc \"LAstAsctor %.0f\" lastActor\n		if(lastActor != 0)\n			if(lastActor != Actor)\n				printc \"Rollback Save Game\"\n				if(lastActor == Player)\n					SetNumericGameSetting fActorStrengthEncumbranceMult oldencoumbrancesetting\n					Call fbmwbmWerewolfManageControlPC 0 1\n				endif\n				Call fbmwBMWerewolfRollBack lastActor lastModelPath\n				Call fbmwUpdate3D lastActor\n			endif\n		endif\n		if(iswerewolf == 1  && Actor != 0)\n			SetModLocalData \"LastModelPath\"  modelpath\n			SetModLocalData \"LastActor\" Actor\n			Call fbmwBMWerewolfTransform Actor\n			Call fbmwUpdate3D Actor\n			if(Actor == Player)\n				set attackclaws to (4)*(GetGlobalValue fbmwbmclawcost)\n				SetAttackDamage attackclaws fbmwbmwerewolfclawPC\n				SetNumericGameSetting fActorStrengthEncumbranceMult 9999\n				Call fbmwbmWerewolfManageControlPC 1 1\n			else\n				set attackclawsNPC  to (4)*(GetGlobalValue fbmwbmClawcostnpc)\n				SetAttackDamage attackclawsNPC fbmwbmwerewolfclaw\n			endif\n		endif\n	endif\n	if(Transform == 1 && iswerewolf == 0)\n		set time to GameHour\n		;Print \"running hircine's ring\"\n		if(modelpath != 0)\n			sv_Destruct modelpath\n		endif\n		Let modelpath := Actor.GetModelPath\n		SetModLocalData \"LastModelPath\"  modelpath\n		SetModLocalData \"LastActor\" Actor\n		;Print \"Skeleton path aquired \" + modelpath\n		Call fbmwBMWerewolfTransform Actor\n		Actor.UnequipItemNS fbmwBMringhircine \n		Call fbmwBMWerewolfEquip Actor\n		set iswerewolf to 1\n		if(Actor == Player)\n			;	Print \"running the player section of the script\"\n			set oldencoumbrancesetting to GetGameSetting fActorStrengthEncumbranceMult \n			SetNumericGameSetting fActorStrengthEncumbranceMult 9999\n			set attackclaws  to (4)*(GetGlobalValue fbmwbmclawcost)\n			SetAttackDamage attackclaws fbmwbmwerewolfclawPC\n			Call fbmwbmWerewolfManageControlPC 1 1\n		else\n			;	Print \"running non player part of the script\"\n			;Actor.SetAV aggression 100\n			set attackclawsNPC  to (4)*(GetGlobalValue fbmwbmClawcostnpc)\n			SetAttackDamage attackclawsNPC fbmwbmwerewolfclaw\n			;Actor.StartCombat Player\n			;Should be the actor script to do so\n		Endif\n		Call fbmwUpdate3D Actor\n	elseif(Transform == 1)\n		;;Wrong FIX.\n		; Print \"timer.....\"\n		if (time < 18)\n			if(newtime >= (time + 6))\n				set Transform to 2\n				Print \"prepare rollback\"\n			endif\n		elseif (newtime < time)\n			if(newtime >= (time + 6 - 24))\n				set Transform to 2\n				Print \"prepare rollback\"\n			endif\n		endif\n		set newtime to GameHour\n	elseif(Transform == 2)\n		;Print \"rollback\"\n		Call fbmwBMWerewolfRollBack Actor modelpath\n		Call fbmwBMWerewolfUnequip Actor\n		Call fbmwUpdate3D Actor\n		if(Actor == Player)\n			Call fbmwbmWerewolfManageControlPC 0 1\n		endif\n		set iswerewolf to 0\n		set time to 0\n		set newtime to 0\n		set Transform to 0\n		set Actor to 0\n		SetModLocalData \"LastActor\" 0\n		SetModLocalData \"LastModelPath\" 0\n		sv_Destruct modelpath\n		;	StopQuest fbmwBMHircinesRingControlQuest ;TODO control.\n	endif\n	if(Actor == Player)\n		if(iswerewolf == 1)\n			Let crosshairRef := GetCrosshairRef\n			if(crosshairRef)\n				if(crosshairRef.IsDoor == 1)&&(crosshairRef.GetLocked == 0);To avoid being blocked in an interior.\n					EnableControl 5\n				else\n					DisableControl 5\n				endif\n			endif\n		endif\n	endif\nEnd\nBegin MenuMode 1002\n	if(iswerewolf == 1 && Actor == Player)	\n		CloseAllMenus\n	endif\nEnd\nBegin MenuMode 1003\n	if(iswerewolf == 1 && Actor == Player)	\n		CloseAllMenus\n	endif\nEnd\nBegin MenuMode 1022\n	if(iswerewolf == 1 && Actor == Player)	\n		CloseAllMenus\n	endif\nEnd\nBegin MenuMode 1023\n	if(iswerewolf == 1 && Actor== Player)	\n		CloseAllMenus\n	endif\nEnd\n;<CSEBlock>\n;<CSECaretPos> 3050 </CSECaretPos>\n;</CSEBlock>", 
    "Local Variables": [
        {
            "SLSD - Local Variable Data": {
                "Index": "00000001", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "Transform"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000002", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "time"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000003", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "newtime"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000004", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "Actor"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000005", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "iswerewolf"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000006", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "modelpath"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000007", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "GetPathOnce"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000008", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "attackclaws"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000009", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "equippeditem"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "0000000A", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "i"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "0000000B", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "attackclawsNPC"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "0000000C", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "item"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "0000000D", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "potentialattacker"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "0000000E", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "crosshairRef"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000010", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "fQuestDelayTime"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000011", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {}, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "lastActor"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000012", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "lastModelPath"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": "00000014", 
                "Unused": "00 00 00 00 00 00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }, 
                "Unused": "CD CD CD CD CD CD CD"
            }, 
            "SCVR - Name": "numb"
        }
    ], 
    "References": [
        "SCRV - Local Variable": "00000004", 
        "SCRV - Local Variable": "0000000C", 
        "SCRV - Local Variable": "0000000D", 
        "SCRV - Local Variable": "0000000E", 
        "SCRV - Local Variable": "00000011", 
        "SCRO - Global Reference": "PlayerRef [PLYR:00000014]", 
        "SCRO - Global Reference": "oldencoumbrancesetting [GLOB:010024D8]", 
        "SCRO - Global Reference": "fbmwbmWerewolfManageControlPC [SCPT:050119DB]", 
        "SCRO - Global Reference": "fbmwBMWerewolfRollBack [SCPT:050119DA]", 
        "SCRO - Global Reference": "fbmwUpdate3D [SCPT:050132C6]", 
        "SCRO - Global Reference": "fbmwBMWerewolfTransform [SCPT:050119D9]", 
        "SCRO - Global Reference": "fbmwbmclawcost [GLOB:0106F418]", 
        "SCRO - Global Reference": "fbmwbmwerewolfclawPC [WEAP:0103D74E]", 
        "SCRO - Global Reference": "fbmwbmClawcostnpc [GLOB:010949A7]", 
        "SCRO - Global Reference": "fbmwbmwerewolfclaw [WEAP:010168D5]", 
        "SCRO - Global Reference": "GameHour [GLOB:00000038]", 
        "SCRO - Global Reference": "fbmwBMringhircine [CLOT:0102A414]", 
        "SCRO - Global Reference": "fbmwBMWerewolfEquip [SCPT:050119DD]", 
        "SCRO - Global Reference": "fbmwBMWerewolfUnequip [SCPT:050132C3]"
    ]
}
